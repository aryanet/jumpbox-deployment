---
- type: replace
  path: /releases/-
  value:
    name: bosh-google-cpi
    url: https://bosh.io/d/github.com/cloudfoundry-incubator/bosh-google-cpi-release?v=28.0.0
    sha1: 2dd64cb888448dadeb0d6297877e0e5d1312d67c

- type: replace
  path: /resource_pools/name=vms/stemcell?
  value:
    url: https://bosh.io/d/stemcells/bosh-google-kvm-ubuntu-xenial-go_agent?v=97.17
    sha1: 61eb67dcebc84d4fa818708f79c1e37d811c99e9

# Configure sizes
- type: replace
  path: /resource_pools/name=vms/cloud_properties?
  value:
    zone: ((zone))
    machine_type: n1-standard-1
    root_disk_size_gb: 20
    root_disk_type: pd-standard

- type: replace
  path: /networks/name=private/subnets/0/cloud_properties?
  value:
    network_name: ((network))
    subnetwork_name: ((subnetwork))
    tags: ((tags))

# Add CPI job
- type: replace
  path: /cloud_provider/template?
  value:
    name: google_cpi
    release: bosh-google-cpi

- type: replace
  path: /cloud_provider/properties/google?
  value:
    project: ((project_id))
    json_key: ((gcp_credentials_json))

# Use GCP NTP
- type: replace
  path: /cloud_provider/properties/ntp
  value: [169.254.169.254]
